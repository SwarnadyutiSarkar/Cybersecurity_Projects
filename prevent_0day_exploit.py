import subprocess
import scapy.all as scapy

# 1. Software Update Checker
def update_software():
    """Update operating system and third-party software."""
    try:
        subprocess.run(["sudo", "apt", "update"], check=True)
        subprocess.run(["sudo", "apt", "upgrade", "-y"], check=True)
        print("Software updated.")
    except subprocess.CalledProcessError as e:
        print(f"Error updating software: {e}")

# 2. Network Intrusion Detection System (NIDS)
def sniff_packets():
    """Sniff packets to detect suspicious activity."""
    try:
        while True:
            packet = scapy.sniff(iface="eth0", count=1)[0]
            # Add logic to analyze packet and detect suspicious activity
            print(packet.summary())
    except KeyboardInterrupt:
        print("Packet sniffing stopped.")

# 3. Security Best Practices
def enable_security():
    """Enable security best practices."""
    try:
        subprocess.run(["sudo", "ufw", "enable"], check=True)  # Enable UFW firewall
        subprocess.run(["sudo", "ufw", "default", "deny"], check=True)  # Set default deny rule
        print("Security enabled.")
    except subprocess.CalledProcessError as e:
        print(f"Error enabling security: {e}")

if __name__ == "__main__":
    print("Updating software...")
    update_software()
    
    print("\nEnabling security...")
    enable_security()
    
    print("\nStarting packet sniffing...")
    sniff_packets()
